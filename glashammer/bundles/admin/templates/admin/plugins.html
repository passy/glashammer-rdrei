{% extends "admin/layout.html" %}
{% block title %}{{ _("Plugin Management") }}{% endblock %}
{% block contents %}
  <h2>{{ _("Plugin Management") }}</h2>
  <form action="" method="post" enctype="multipart/form-data">
    <p>{% trans %}
      Plugins extend the functionality of the TextPress system. Because of
      security and convinience reasons you have to enable plugins by hand.
      Some plugins could conflict with each other so it's up to you to
      decide which plugins you want to enable. In case of doubt have a look
      into the installation instructions of the plugin you've added.
    {% endtrans %}</p>
    <table class="plugins">
      <tr>
        <th class="plugin">{{ _("Plugin") }}</th>
        <th class="version">{{ _("Version") }}</th>
        <th class="description">{{ _("Description") }}</th>
        <th class="active">{{ _("Activate") }}</th>
      </tr>
    {%- for plugin in plugins %}
      <tr class="plugin-{{ 'active' if plugin.active else 'inactive' }}">
        <td class="plugin">{{ plugin.html_display_name }}</td>
        <td class="version">{{ (plugin.version or '?')|e }}</td>
        <td class="description">{{ plugin.description }}
          <span class="author">
          {% trans author=plugin.html_author_info %}
          By {{ author }}
          {% endtrans %}
          {% if plugin.contributors %}
          {% trans contributors=plugin.html_contributors_info %}
            and {{ contributors }}
          {% endtrans %}
          {% endif %}
          </span>
          {%- if not plugin.builtin_plugin and not plugin.active %}
            [<a href="{{ url_for('admin/remove_plugin', plugin=plugin.name)
              }}">{{ _("Remove plugin") }}</a>]
          {% endif -%}
        </td>
        <td class="active">{{ h.checkbox('plugin_' + plugin.name, plugin.active) }}
            <label for="plugin_{{ plugin.name }}"></label></td>
      </tr>
    {%- endfor %}
    </table>
    <h3>{{ _("Add New Plugin") }}</h3>
    <p>{% trans %}
      If you have a plugin as TextPress <tt>.plugin</tt> file you can upload it
      to your TextPress instance using the following form. Plugins added this way
      can also be completely removed.
    {% endtrans %}</p>
    <p><input type="file" name="new_plugin"></p>
    <div class="actions">
      {{ csrf_protector }}
      <input type="submit" value="{{ _('Update') }}">
      {%- if guard_enabled %}
      <input type="submit" name="disable_guard" value="{{ _('Disable Plugin Guard') }}">
      {%- else %}
      <input type="submit" name="enable_guard" value="{{ _('Enable Plugin Guard') }}">
      {%- endif %}
    </div>
  </form>
{% endblock %}
